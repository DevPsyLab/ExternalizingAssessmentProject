---
title: "Best Practices for Creating and Maintaining Lab Protocols in R Markdown"
author: "Isaac Petersen"
date: '`r format(Sys.Date(), "%B %d, %Y")`'
output: 
  html_document:
    toc: true
    toc_float: true
    number_sections: true
    code_folding: hide
    df_print: paged
  github_document:
    html_preview: FALSE
    toc: true
    number_sections: true
  pdf_document:
    toc: yes
    number_sections: yes
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(echo = TRUE,
                      error = TRUE)
```

The `.md` and `.html` files are generated from the `.Rmd` file.
Make sure to make any edits to the `.Rmd` file (not the `.md` and `.html` files).

# Creating a Lab Protocol

To create a lab protocol, create a `.Rmd` file with the following `YAML` header at the top of the file:

```yaml
---
title: "Best Practices for Creating and Maintaining Lab Protocols in R Markdown"
author: "INSERT AUTHOR NAME"
date: "`r knitr::inline_expr("format(Sys.time(), '%d %B, %Y')")`"
output: 
  html_document:
    toc: true
    toc_float: true
    number_sections: true
    code_folding: hide
    df_print: paged
  github_document:
    html_preview: FALSE
    toc: true
    number_sections: true
  pdf_document:
    toc: yes
    number_sections: yes
---
```

Then, include the following as the first code chunk:

````markdown
```{r setup, include = FALSE}`r ''`
knitr::opts_chunk$set(echo = TRUE,
                      error = TRUE)
```
````

Then, include whatever text and/or code chunks.

The `.md` and `.html` files are generated from the `.Rmd` file.
Make sure to make any edits to the `.Rmd` file (not the `.md` and `.html` files).
Then, knit the `.Rmd` file to update the `.md` and `.html` files.
This is done automatically when committing a change to GitHub.
After the knitting is complete, you can fetch the created `.md` and `.html` files by fetching the latest version of the repo in the GitHub repo.

# Best Practices

Adapted from [here](https://github.com/lowepowerlab/protocols/blob/main/markdown_best_practices.md):

* **Use a new line for every sentence.** 
This helps with version control—individually changed sentences will be highlighted upon commits (easy to parse) rather than whole paragraphs (nightmare to parse).
    * This formatting is incompatible with a double space after period. 
    Do a find and replace for `".  "` → `". "` 
    Be careful not to blanket remove all double spaces because tabbed bullets have 3 spaces. 

* Add protocol entries as links to the `README.md`

* Add linked content (e.g. images, excel workbooks, etc) to sub-directories

* Use no spaces in file or folder names.
Use a dash (-) instead of a space.

* When making numbered lists, just use `1. ` for all numbers. 
Markdown will make them sequential automatically.
This is helpful if you go back & add additional entries later. 

* Use `"XXX"` to indicate an area that needs editing.
This will allow the lab to `CTRL+F` for `"XXX"` and find areas that need editing.

* To update the list of R packages that are installed for running the `.Rmd` files, update the `DESCRIPTION` file.

# Session Info

```{r}
sessionInfo()
```

## Rstudio Version

```{r}
rstudioapi::versionInfo()
```
